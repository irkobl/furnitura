"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var i=0,n=Array(e.length);i<e.length;i++)n[i]=e[i];return n}return Array.from(e)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define("ul-fileinput",["jquery","asyncjs"],function(e,i){var n={init:function(){return function(){var e=this;e.attachListeners()}}(),attachListeners:function(){return function(){var e=this;this.$el.off(".fileInputEvent").on("click.fileInputEvent",".js-file-input-remove",e.removeLoadFile.bind(e)).on("click.fileInputEvent",".js-file-input-button",e.openFileDialog.bind(e)).on("change.fileInputEvent",".js-file-input-control",e.filesSelected.bind(e))}}(),removeLoadFile:function(){return function(i){var n=this,t=e(".js-file-input-control",n.$el),l=e(i.currentTarget).closest(".js-file-input-filename"),r=l.attr("data-file");n.files&&n.files[r]&&(delete n.files[r],t.val(""),l.remove())}}(),openFileDialog:function(){return function(i){var n=this;if(!e(i.target).hasClass("js-file-input-remove")&&!e(i.target).hasClass("js-file-input-filename")){var t=e(i.currentTarget);n.files={},e(".js-file-input-control",n.$el).val(""),t.parent(".js-file-input").find(".js-file-input-filename").remove(),t.parent(".js-file-input").find(".js-file-input-label").removeClass("d-file-input-label-error").text(""),t.parent(".js-file-input").find(".js-file-input-control").click(),n.open()}}}(),clearLabel:function(){return function(){var e=this;e.files={},e.$el.find(".js-file-input-filename").remove(),e.$el.find(".js-file-input-label").removeClass("d-file-input-label-error").text("")}}(),clearInput:function(){return function(){var e=this;e.files={},e.$el.find(".js-file-input-filename").remove(),e.$el.find(".js-file-input-control").val("")}}(),checkMimeTypes:function(){return function(e){var i,n;for(i=0;i<e.length;i+=1)if(n=e[i],-1===this.allowedMimeTypes.indexOf(n.type))return n.name;return null}}(),checkFilesSize:function(){return function(e){var i,n;for(i=0;i<e.length;i+=1)if(n=e[i],n.size>this.maxFileSize)return n.name;return null}}(),checkSizeSum:function(){return function(e){var i,n=0;for(i=0;1<e.length&&i<e.length;i+=1)n+=e[i].size;return n>this.maxSumSize?(n/1048576).toFixed(1):null}}(),checkMinSize:function(){return function(e){var i,n=null;for(i=0;i<e.length;i+=1)0===e[i].size&&(n=!0);return n}}(),filesSelected:function(){return function(i){var n,t=this,l=e(i.currentTarget),r=l[0],o=r.files,f=!1,u="",s=t.i18nView,a=function(){return function(i,n){e(".js-file-input-button",t.$el).append('<span class="ul-file-name js-file-input-filename g-color-text-3" data-file="'+i+'">'+n.name.trim()+'<span class="fa fa-trash js-file-input-remove  ul-file-input-remove-icon"></span></span>')}}();n=["checkMimeTypes","checkSizeSum","checkMinSize","checkFilesSize"].map(function(e){var i=t[e](o);return{r:i,validator:e}}).filter(function(e){return null!==e.r}).shift(),"object"===("undefined"==typeof n?"undefined":_typeof(n))&&"checkSizeSum"===n.validator?(u=s("constructor.too big sum size").replace("{sumSize}",n.r),u=u.replace("{maxSumSize}",this.maxSumSize/1048576),f=!0):"object"===("undefined"==typeof n?"undefined":_typeof(n))&&"checkFilesSize"===n.validator?(u=s("constructor.too big file").replace("{fileName}",n.r),u=u.replace("{size}",this.maxFileSize/1048576),f=!0):"object"===("undefined"==typeof n?"undefined":_typeof(n))&&"checkMimeTypes"===n.validator?(u=s("constructor.wrong file type").replace("{fileName}",n.r),f=!0):t.maxFiles&&t.maxFiles<o.length?(u=s("constructor.too many files",t.maxFiles).replace("{count}",t.maxFiles),f=!0):"object"===("undefined"==typeof n?"undefined":_typeof(n))&&"checkMinSize"===n.validator?(u=s("constructor.too empty file"),f=!0):0===o.length?u="":1===o.length?(t.specialFileList?(a(0,o[0]),t.selectFile(o[0])):u=o[0].name,t.files[0]=o[0]):1<o.length&&(t.specialFileList?(e.each(o,function(e,i){a(e,i)}),t.selectFile(o)):u=s("all.attching files")+" "+o.length,e.each(o,function(e,i){t.files[e]=i})),f&&(l.val(""),t.specialFileList&&t.errorMessage(u),t.error(u)),l.parent(".js-file-input").find(".js-file-input-label").toggleClass("d-file-input-label-error",f).text(u)}}(),errorMessage:function(){return function(i){var n=this;e(".js-file-input-button",n.$el).append('<span class="js-file-input-filename ul-file-name ul-file-name-error">'+i+"</span>")}}(),getFileInput:function(){return function(){var e=this;return e.files}}(),upload:function(){return function(n,t){var l,r,o=this.$el.find(".js-file-input-control"),f=o[0],u=f.files||[],s=[];for(r=0;r<u.length;r+=1)s.push(u[r]);i.map(s,function(i,t){l=new FormData,l.append("file",i),e.ajax({url:n,method:"POST",data:l,processData:!1,contentType:!1,doNotShowAjax404Error:!0,success:function(){return function(e){"string"==typeof e?t(e):t.apply(void 0,_toConsumableArray(e))}}(),error:function(){return function(){t(!0,null)}}()})},t)}}()},t=function(){return function(e){this.$el=e.$el,this.allowedMimeTypes=e.allowedMimeTypes,this.maxFileSize=e.maxFileSize,this.maxSumSize=e.maxSumSize,this.maxFiles=e.maxFiles,this.specialFileList=e.specialFileList||!1,this.selectFile=e.selectFile||function(){},this.error=e.error||function(){},this.open=e.open||function(){},this.files={},this.i18nView=e.i18nView}}();return t.prototype=n,t});
//# sourceMappingURL=fileinput.js.map

//# sourceMappingURL=fileinput.js.map

//# sourceMappingURL=fileinput.js.map

//# sourceMappingURL=fileinput.js.map

//# sourceMappingURL=fileinput.js.map

//# sourceMappingURL=fileinput.js.map

//# sourceMappingURL=fileinput.js.map

//# sourceMappingURL=fileinput.js.map

//# sourceMappingURL=fileinput.js.map

//# sourceMappingURL=fileinput.js.map

//# sourceMappingURL=fileinput.js.map

//# sourceMappingURL=fileinput.js.map

//# sourceMappingURL=fileinput.js.map

//# sourceMappingURL=fileinput.js.map
